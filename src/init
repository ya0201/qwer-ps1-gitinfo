if ! which add-zsh-hook &>/dev/null; then
  autoload -Uz add-zsh-hook
fi
if ! which vcs_info &>/dev/null; then
  autoload -Uz vcs_info
fi

zstyle ':vcs_info:git:*' check-for-changes true
zstyle ':vcs_info:git:*' stagedstr "%F{yellow}!"
zstyle ':vcs_info:git:*' unstagedstr "%F{red}+"
zstyle ':vcs_info:*' formats "%F{green}%c%u[%b]%f"
zstyle ':vcs_info:*' actionformats '[%b|%a]'

add-zsh-hook precmd vcs_info
